# Gemma3 Legal AI Modelfile - Corrected Version
# This file configures the custom Gemma3 model for legal analysis

FROM .\gemma3Q4_K_M\mo16.gguf

# Template for Gemma3 chat format
TEMPLATE """<bos><start_of_turn>user
{{ if .System }}{{ .System }}

{{ end }}{{ .Prompt }}<end_of_turn>
<start_of_turn>model
{{ .Response }}<end_of_turn>"""

# Legal AI System Prompt
SYSTEM """You are a specialized Legal AI Assistant powered by Gemma 3, trained on legal documents and case law. You provide:

- Accurate legal analysis and research assistance
- Contract review and document interpretation  
- Evidence evaluation and case strategy guidance
- Regulatory compliance insights
- Professional legal terminology and citations

Always maintain professional standards, cite sources when available, and clearly indicate when information is insufficient for definitive advice. Recommend consulting qualified legal professionals for critical decisions."""

# Optimized parameters for legal AI
PARAMETER temperature 0.1          # Low creativity for consistent legal analysis
PARAMETER top_p 0.8               # Focused but comprehensive responses  
PARAMETER top_k 20                # Limited but relevant token selection
PARAMETER repeat_penalty 1.05     # Prevent repetitive phrasing
PARAMETER num_ctx 8192            # Large context for document analysis
PARAMETER num_predict 1024        # Detailed response capability
PARAMETER num_batch 8             # Efficient batch processing
PARAMETER stop "<end_of_turn>"    # Proper response termination
PARAMETER stop "<|im_end|>"       # Alternative stop token
