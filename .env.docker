# Detective Evidence Synthesizer - Docker Environment Variables
# These are used by Docker Compose for container configuration

# Project Configuration
PROJECT_NAME=detective-evidence-synthesizer
PROJECT_VERSION=1.0.0
ENVIRONMENT=development

# Container Names and Network
CONTAINER_PREFIX=detective_
NETWORK_NAME=detective_network_new
NETWORK_NAME_GPU=detective_network_gpu

# Database Configuration
POSTGRES_DB=detective_evidence_db
POSTGRES_USER=detective
POSTGRES_PASSWORD=secure_password
POSTGRES_PORT_CPU=5433
POSTGRES_PORT_GPU=5434

# Qdrant Configuration
QDRANT_PORT_CPU=6334
QDRANT_PORT_GPU=6335
QDRANT_GRPC_PORT_GPU=6336

# Redis Configuration
REDIS_PORT_CPU=6380
REDIS_PORT_GPU=6381
REDIS_MAXMEMORY_CPU=128mb
REDIS_MAXMEMORY_GPU=512mb

# RabbitMQ Configuration
RABBITMQ_DEFAULT_USER=detective
RABBITMQ_DEFAULT_PASS=secure_password
RABBITMQ_PORT_CPU=5673
RABBITMQ_PORT_GPU=5674
RABBITMQ_MANAGEMENT_PORT_CPU=15673
RABBITMQ_MANAGEMENT_PORT_GPU=15674

# Ollama Configuration
OLLAMA_PORT_CPU=11435
OLLAMA_PORT_GPU=11436
OLLAMA_HOST=0.0.0.0
OLLAMA_KEEP_ALIVE_CPU=5m
OLLAMA_KEEP_ALIVE_GPU=10m
OLLAMA_NUM_PARALLEL_CPU=1
OLLAMA_NUM_PARALLEL_GPU=2

# Local GGUF Model Configuration
LOCAL_MODEL_PATH=./gemma3Q4_K_M
LOCAL_MODEL_FILE=mo16.gguf
MODEL_NAME=gemma3-detective

# GPU Configuration
CUDA_VISIBLE_DEVICES=0
OLLAMA_GPU_LAYERS=33
OLLAMA_FLASH_ATTENTION=true

# Resource Limits (CPU Version)
POSTGRES_MEMORY_LIMIT_CPU=512M
POSTGRES_MEMORY_RESERVE_CPU=256M
QDRANT_MEMORY_LIMIT_CPU=256M
QDRANT_MEMORY_RESERVE_CPU=128M
REDIS_MEMORY_LIMIT_CPU=128M
REDIS_MEMORY_RESERVE_CPU=64M
RABBITMQ_MEMORY_LIMIT_CPU=256M
RABBITMQ_MEMORY_RESERVE_CPU=128M
OLLAMA_MEMORY_LIMIT_CPU=6G
OLLAMA_MEMORY_RESERVE_CPU=3G

# Resource Limits (GPU Version)
POSTGRES_MEMORY_LIMIT_GPU=2G
POSTGRES_MEMORY_RESERVE_GPU=1G
QDRANT_MEMORY_LIMIT_GPU=1G
QDRANT_MEMORY_RESERVE_GPU=512M
REDIS_MEMORY_LIMIT_GPU=512M
REDIS_MEMORY_RESERVE_GPU=256M
RABBITMQ_MEMORY_LIMIT_GPU=512M
RABBITMQ_MEMORY_RESERVE_GPU=256M
OLLAMA_MEMORY_LIMIT_GPU=12G
OLLAMA_MEMORY_RESERVE_GPU=6G

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT_CPU=10s
HEALTH_CHECK_TIMEOUT_GPU=15s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_RETRIES_GPU=5

# Database Initialization
POSTGRES_INITDB_ARGS=--encoding=UTF-8 --lc-collate=en_US.UTF-8 --lc-ctype=en_US.UTF-8
POSTGRES_SHARED_BUFFERS_CPU=256MB
POSTGRES_SHARED_BUFFERS_GPU=1GB
POSTGRES_EFFECTIVE_CACHE_SIZE_GPU=4GB

# Qdrant Optimization
QDRANT_LOG_LEVEL=INFO
QDRANT_MAX_SEARCH_THREADS_GPU=8
QDRANT_MEMMAP_THRESHOLD_GPU=50000