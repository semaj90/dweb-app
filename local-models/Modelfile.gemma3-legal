# Reference the GGUF file exported from Unsloth
FROM ./gemma3-legal-q5_k_m.gguf

# Define the prompt structure for Gemma instruct models
TEMPLATE "[INST] {{ .Prompt }} [/INST]"

# System prompt for detailed legal analysis
SYSTEM """
You are an expert legal analysis assistant specializing in comprehensive legal research and advice.
Provide detailed, accurate legal information with proper citations and thorough analysis.
Always consider multiple perspectives and potential legal implications.
Include relevant case law, statutes, and legal principles in your responses.
"""

# GPU and performance parameters
PARAMETER num_gpu -1        # Use -1 to offload all possible layers to the GPU
PARAMETER main_gpu 0        # Specify the primary GPU (0 for single GPU systems)
PARAMETER num_ctx 8192      # Set context window size (8K tokens)
PARAMETER num_thread 8      # CPU threads for non-GPU operations
PARAMETER temperature 0.3   # Lower temperature for more focused legal analysis
PARAMETER top_p 0.95       # High quality sampling
PARAMETER repeat_penalty 1.1 # Prevent repetition
