# Reference the GGUF file exported from Unsloth
FROM ./gemma3-quick-q5_k_m.gguf

# Define the prompt structure for Gemma instruct models
TEMPLATE "[INST] {{ .Prompt }} [/INST]"

# System prompt for quick legal responses
SYSTEM """
You are a quick legal reference assistant. Provide concise, accurate legal information.
Rules:
1. Keep responses under 200 words
2. Focus on key legal points only
3. Use bullet points for clarity
4. Always cite relevant law sections
5. Respond immediately without lengthy analysis

Format responses as:
- Key Point: [brief explanation]
- Relevant Law: [citation]
- Action: [recommended next step]
"""

# GPU and performance parameters for fast responses
PARAMETER num_gpu -1        # Use -1 to offload all possible layers to the GPU
PARAMETER main_gpu 0        # Specify the primary GPU
PARAMETER num_ctx 4096      # Smaller context for faster responses
PARAMETER num_thread 8      # CPU threads for non-GPU operations
PARAMETER temperature 0.1   # Very low temperature for consistent quick responses
PARAMETER top_p 0.9        # Focused sampling
PARAMETER repeat_penalty 1.1 # Prevent repetition
PARAMETER num_predict 200   # Limit response length for quick answers
