# NATS Server configuration for Legal AI system

# Server settings
server_name: "legal-ai-nats-01"
listen: 0.0.0.0:4222
http: 8222

# Logging
log_file: "C:/ProgramData/NATS/logs/nats-server.log"
logtime: true
debug: false
trace: false
log_size_limit: 100MB
max_traced_msg_len: 32768

# Connection settings
max_connections: 1000
ping_interval: "30s"
ping_max: 3

# Message limits
max_payload: 1MB
max_pending: 256MB
max_subscriptions: 1000

# Cluster settings (for future scaling)
cluster {
  name: "legal-ai-cluster"
  listen: 0.0.0.0:6222
  
  # Authorization
  authorization {
    # Placeholder for auth configuration
    # users: [
    #   {user: "legal-ai", password: "secure-password"}
    # ]
  }
}

# JetStream (persistent messaging)
jetstream: {
  store_dir: "C:/ProgramData/NATS/jetstream"
  max_memory_store: 1GB
  max_file_store: 10GB
  
  # Legal AI specific streams
  streams: [
    {
      name: "LEGAL_DOCUMENTS"
      subjects: ["legal.document.*"]
      retention: "limits"
      max_age: "24h"
      storage: "file"
      replicas: 1
    },
    {
      name: "LEGAL_ANALYSIS"
      subjects: ["legal.ai.*", "legal.vector.*"]
      retention: "workqueue"
      max_age: "1h"
      storage: "memory"
      replicas: 1
    },
    {
      name: "SYSTEM_EVENTS"
      subjects: ["legal.system.*", "legal.health.*"]
      retention: "limits"
      max_age: "7d"
      storage: "file"
      replicas: 1
    }
  ]
}

# Monitoring
monitoring: {
  http: "0.0.0.0:8222"
  https: ""
}

# TLS (placeholder for production)
# tls: {
#   cert_file: "./certs/server.crt"
#   key_file: "./certs/server.key"
#   ca_file: "./certs/ca.crt"
#   timeout: 5
# }